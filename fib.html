<div>
  Please enter your Fibonacci value here then press enter <input id="fibInput"></input>
  <div id="fib"></div>
</div>

<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

<script>
cache = [];


function fibCache(index, cache){
  if(typeof caching == "undefined")caching = [];
  if(cache[index]) return cache[index];
  if(index <=2){
    cache[index] = 1;
    return cache[index];
  }
  else cache[index] = fibCache(index -1, cache) + fibCache(index -2, cache);

  return cache[index];
}

let html = (num, row) => {
  if(num == 0 ){
    $("."+row+"").append('<p style="margin-right: 2rem; text-align:center; flex:'+row+'"></p>');
  } else {
    $("."+row+"").append('<p style="margin-right: 2rem; text-align:center; flex:'+row+'">  F(' + num + ")" + '</p>');

  }
}

function test23(array, row){
    row = row || 1;
    array = array.slice(0);
    let temp1 = array.slice(0);
    let temp2 = array.slice(0);

    if(array.length == cache.length){
      html(array.length, row)
      console.log(array.length)
    }
    row++;

    if(array.length == 1){
      html(array.length-1, row)
      html(array.length-1, row)
    }

    if(array.length >1){
      html(array.length-1, row)
      console.log(array.length-1)
      test23(temp1.splice(0,array.length-1), row);
    }
    // row++
    if(array.length >2){
      html(array.length-2, row);
      console.log(array.length-2)
      test23(temp2.splice(0,array.length-2), row);

    }
}

// fibCache(5, cache);
// test23(cache)
$("#fibInput").on('change', function(){

  $("#fib").empty();

  if(cache.length == 0) fibCache(this.value, cache);
  else fibCache(this.value -1, cache);

  if(cache.length > 0) while(cache[0] == undefined && cache.length >1)
  cache.shift();

  cache = cache.splice(0, this.value);
  for(var i = 1; i<=cache.length; i++){
    $("#fib").append('<div style="display:flex; margin:0 10%;" class="' + i + '"></div>');
  }

  test23(cache)
})

</script>
